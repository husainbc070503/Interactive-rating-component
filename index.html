<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Frontend Mentor | Interactive rating component</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://kit.fontawesome.com/6ccdd39db5.js" crossorigin="anonymous"></script>
</head>

<body>
    <div class="container">
        <div class="rating-card" id="card">
            <div class="star">
                <img src="images/icon-star.svg">
            </div>
            <div class="content">
                <h2>How did we do?</h2>
                <p>Please let us know how we did with your support request. All feedback is appreciated
                    to help us improve our offering!</p>
            </div>
            <div class="ratings">
                <div>1</div>
                <div>2</div>
                <div>3</div>
                <div>4</div>
                <div>5</div>
            </div>
            <button type="button" class="rate" onclick="openPopUp()">Submit</button>
        </div>
        <div class="pop-up" id="popup">
            <img src="images/illustration-thank-you.svg">
            <p class="msg">You selected <span id="rated"></span> out of 5</p>
            <h1>Thank you!</h1>
            <p class="text">We appreciate you taking the time to give a rating. If you ever need more support,
                donâ€™t hesitate to get in touch!</p>
            <button type="button" class="close" onclick="closePopUp()"><i class="fa-solid fa-xmark"></i></button>
        </div>
        <div class="attribution">
            Challenge by <a href="https://www.frontendmentor.io?ref=challenge" target="_blank">Frontend Mentor</a>.
            Coded by <a href="/">Husain Champawala</a>.
        </div>
    </div>

    <script>
        var card = document.getElementById('card')
        var popup = document.getElementById('popup')
        var no = document.getElementById('rated')
        var selected = false

        var buttons = document.querySelectorAll('.ratings div')
        Array.from(buttons).forEach(function (e) {
            e.addEventListener('click', function () {
                if (e.parentNode.querySelector('.active')) {
                    e.parentNode.querySelector('.active').classList.remove('active')
                }
                e.classList.add('active')
                no.innerHTML = e.innerText
                selected = true
            })
        })

        function openPopUp() {
            if (selected) {
                popup.classList.toggle('open')
                card.classList.toggle('close-card')
            }
            else
                alert('Please select your rating!!')
        }

        function closePopUp() {
            popup.classList.toggle('open')
            card.classList.toggle('close-card')
        }
    </script>
</body>

</html>